"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const devkit_imports_1 = require("../devkit-imports");
const utils_1 = require("../utils");
exports.default = (0, devkit_imports_1.convertNxGenerator)(async (tree, options) => {
    const projectName = (0, utils_1.determineTargetProjectName)(tree, options.project);
    if (!projectName) {
        throw new Error('\n' +
            `
Error: You must specify a project to add ESLint to because you have multiple projects in your angular.json

E.g. npx ng g @angular-eslint/schematics:add-eslint-to-project {{YOUR_PROJECT_NAME_GOES_HERE}}
      `.trim());
    }
    // Create the config file first so that we can check for its existence when setting the target
    (0, utils_1.createESLintConfigForProject)(tree, projectName, options.setParserOptionsProject ?? false);
    // Update the lint builder and config in angular.json
    (0, utils_1.addESLintTargetToProject)(tree, projectName, 'lint');
});
